Version 4
SHEET 1 2328 1312
WIRE 0 96 -176 96
WIRE 112 96 80 96
WIRE 192 96 192 32
WIRE 192 96 112 96
WIRE 336 96 192 96
WIRE 512 96 368 96
WIRE 640 96 592 96
WIRE 768 96 720 96
WIRE 1040 96 768 96
WIRE 1216 96 1040 96
WIRE 768 128 768 96
WIRE 80 160 0 160
WIRE 288 192 128 192
WIRE 352 192 352 112
WIRE -176 208 -176 96
WIRE 768 208 768 192
WIRE 1040 224 1040 96
WIRE 0 240 0 160
WIRE 112 240 112 96
WIRE 112 240 80 240
WIRE 192 240 192 96
WIRE 288 256 288 192
WIRE 240 272 208 272
WIRE 768 304 768 288
WIRE 16 320 16 288
WIRE 128 320 128 192
WIRE 144 320 128 320
WIRE 64 336 64 288
WIRE -176 416 -176 288
WIRE 192 416 192 320
WIRE 192 416 -176 416
WIRE 240 416 240 320
WIRE 240 416 192 416
WIRE 288 416 288 336
WIRE 288 416 240 416
WIRE 768 416 768 384
WIRE 768 416 288 416
WIRE 1040 416 1040 304
WIRE 1040 416 768 416
WIRE 208 432 208 272
WIRE -176 448 -176 416
WIRE 16 736 -400 736
WIRE 1152 736 1088 736
WIRE 400 752 288 752
WIRE 752 752 736 752
WIRE 768 752 752 752
WIRE 928 752 848 752
WIRE 976 752 928 752
WIRE 1024 752 976 752
WIRE 16 768 -320 768
WIRE 672 768 576 768
WIRE 400 784 288 784
WIRE 16 800 -64 800
WIRE 976 800 976 752
WIRE 432 816 288 816
WIRE 576 816 576 768
WIRE 576 816 432 816
WIRE -144 832 -208 832
WIRE 16 832 -144 832
WIRE 752 832 752 752
WIRE 800 832 752 832
WIRE 928 832 928 752
WIRE 928 832 864 832
WIRE 432 848 288 848
WIRE 16 864 -64 864
WIRE -544 896 -624 896
WIRE -400 896 -464 896
WIRE -64 896 -64 864
WIRE -64 896 -400 896
WIRE -400 960 -400 896
WIRE -336 960 -400 960
WIRE -176 960 -256 960
WIRE 576 960 576 816
WIRE 672 960 576 960
WIRE 1152 960 1088 960
WIRE 752 976 736 976
WIRE 768 976 752 976
WIRE 880 976 848 976
WIRE 960 976 880 976
WIRE 1024 976 960 976
WIRE -112 1008 -112 960
WIRE 432 1008 432 848
WIRE 432 1008 -112 1008
WIRE 752 1056 752 976
WIRE 784 1056 752 1056
WIRE 880 1056 880 976
WIRE 880 1056 848 1056
WIRE -624 1104 -624 896
WIRE 1216 1104 1216 96
WIRE 1216 1104 -624 1104
FLAG -176 448 0
FLAG 352 192 isense
FLAG 192 32 sourceHS
FLAG 1040 96 out
FLAG -176 96 vin
FLAG -64 800 isense
FLAG 400 784 isensa
FLAG 400 752 clk
FLAG 432 816 pwm
FLAG -144 832 n_inv
FLAG -64 864 inv
FLAG 16 320 pwm_hs
FLAG 64 336 0
FLAG 208 432 inv_pwm
FLAG 976 864 0
FLAG 960 1040 0
FLAG 1152 736 pwm_hs
FLAG 1152 960 inv_pwm
SYMBOL ind 624 112 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value {ind}
SYMBOL res 608 80 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value {RL}
SYMBOL cap 752 128 R0
SYMATTR InstName C1
SYMATTR Value {cap1}
SYMBOL res 1024 208 R0
SYMATTR InstName Rload
SYMATTR Value 1.45
SYMBOL voltage -176 192 R0
WINDOW 123 0 0 Left 0
WINDOW 39 -245 1 Left 2
SYMATTR InstName V1
SYMATTR Value 48
SYMBOL Control\\isense 352 96 R0
SYMATTR InstName U1
SYMBOL irfbsl4310 256 288 R0
WINDOW 3 -158 78 Top 2
SYMATTR InstName U5
SYMBOL irfbsl4310 48 32 R270
WINDOW 3 -4 -4 VBottom 2
SYMATTR InstName U6
SYMBOL ind 752 288 R0
SYMATTR InstName ESL
SYMATTR Value {LC1}
SYMBOL res 752 192 R0
SYMATTR InstName ESR
SYMATTR Value {RC1}
SYMBOL res -240 944 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 16k
SYMBOL cap -112 944 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C2
SYMATTR Value 10n
SYMBOL res -448 880 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 16k
SYMBOL Control\\constant -240 832 R0
WINDOW 3 -4 64 Bottom 2
SYMATTR Value K=12
SYMATTR InstName U8
SYMBOL e -16 240 R270
SYMATTR InstName E1
SYMATTR Value 15
SYMBOL e 288 240 R0
SYMATTR InstName E2
SYMATTR Value 15
SYMBOL Digital\\buf 672 704 R0
SYMATTR InstName A1
SYMBOL Digital\\buf 672 896 R0
SYMATTR InstName A2
SYMBOL Digital\\buf 1024 688 R0
SYMATTR InstName A3
SYMBOL Digital\\buf 1024 912 R0
SYMATTR InstName A4
SYMBOL res 864 736 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 1k
SYMBOL cap 960 800 R0
SYMATTR InstName C3
SYMATTR Value {td/693}
SYMBOL res 864 960 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 1k
SYMBOL cap 944 976 R0
SYMATTR InstName C4
SYMATTR Value {td/693}
SYMBOL diode 864 816 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D1
SYMBOL diode 848 1040 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D2
SYMBOL MyCMC2 144 800 R0
WINDOW 123 -20 122 Bottom 2
WINDOW 39 -12 160 Bottom 2
WINDOW 40 -25 193 Bottom 2
SYMATTR Value2 f={fs}
SYMATTR SpiceLine ma=4.167*{RL}/{ind}+6/{ind}
SYMATTR SpiceLine2 Ao=1e5 FBW=1e6
SYMATTR InstName U2
SYMATTR Value ""
SYMATTR SpiceModel MyCMC2
SYMBOL Control\\constant -432 736 R0
WINDOW 3 -8 64 Bottom 2
SYMATTR Value K=20
SYMATTR InstName U3
SYMBOL Control\\constant -352 768 R0
WINDOW 3 -5 59 Bottom 2
SYMATTR Value K=0.9
SYMATTR InstName U4
TEXT 1312 128 Left 2 ;.meas P_s1 avg V(vin,sourceHS)*Ix(U6:D)
TEXT 1312 160 Left 2 ;.meas P_s2 avg V(sourcehs)*Ix(U5:D)
TEXT 1312 80 Left 2 !.param ind=30u RL=0.12077301606043182
TEXT 1312 192 Left 2 !.meas P_L_cu avg I(R1)*I(R1)*RL
TEXT 1312 224 Left 2 !.meas Pout avg V(out)*I(Rload)
TEXT 1312 256 Left 2 !.meas Pin avg -V(vin)*I(V1)
TEXT 1312 288 Left 2 !.meas eff(%) param Pout/Pin*100
TEXT 1312 320 Left 2 !.meas vout avg V(out)
TEXT 1312 352 Left 2 !.meas IL avg I(L1)
TEXT 1312 384 Left 2 !.meas tran vout_max max V(out)
TEXT 1312 416 Left 2 !.meas tran vout_min min V(out)
TEXT 1312 448 Left 2 !.meas vout_ripple(%) param (vout_max-vout_min)/vout*100
TEXT 1312 480 Left 2 !.meas tran IL_max max I(L1)
TEXT 1312 512 Left 2 !.meas tran IL_min min I(L1)
TEXT 1312 544 Left 2 !.meas IL_ripple(%) param (IL_max-IL_min)/IL*100
TEXT 1312 24 Left 2 !.param td=300n fs=20k
TEXT 1312 48 Left 2 !.param cap1=20u RC1=0.00011140846016432676 LC1=4.389e-08
TEXT 1312 584 Left 2 !.meas P_c avg I(Esr)*I(Esr)*RC1
TEXT -160 664 Left 2 !.tran 0 25m 15m uic
TEXT -16 1056 Left 2 ;ma=4.167*{RL}/{ind}+6/{ind}
